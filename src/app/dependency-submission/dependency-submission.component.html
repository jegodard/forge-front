

<error-modal></error-modal>

<h5 class="header red-text text-darken-1">Propose your dependency</h5>

<form [formGroup]="dependSubmitForm" (ngSubmit)="onSubmit(dependSubmitForm.value, dependSubmitForm.valid)">  
    <div class="card-panel hoverable">

        <div class="row">
            <div class="col s12 m6">
                <select id="frameworkId" formControlName="frameworkId"
                        #t (change)="updateFrameworkVersion(t.value)" class="browser-default">
                    <option value="" disabled selected>Choose your framework</option>
                    <option *ngFor="let framework of frameworks" [value]="framework.id">  
                        {{framework.name}}
                    </option>
                </select>
                <label>Framework</label>
            </div>        

            <div class="col s12 m6">
                <select id="frameworkVersion" formControlName="frameworkVersion" class="browser-default">
                    <option value="" disabled selected>Choose your version</option>
                    <option *ngFor="let frameworkVersion of frameworkVersions" [value]="frameworkVersion">  
                    {{frameworkVersion}}
                    </option>
                </select>
                <label>Framework version</label>
            </div> 
        </div>


        <div class="row">
            <div class="input-field col s12 m12">
                <label for="name">Artifact name</label> 
                <input  id="name" type="text"
                        formControlName="name"                      
                        [ngClass]="{invalid: dependSubmitForm.get('name').invalid  && dependSubmitForm.get('name').touched}">       
                <span class="error"
                    style="position: absolute; z-index: 4;" 
                    *ngIf="dependSubmitForm.get('name').hasError('required') && dependSubmitForm.get('name').touched">
                    Required
                </span>       
            </div>
        </div>


        <div class="row">
            <div class="input-field col s6 m4">
                <label for="name">Artifact Id</label> 
                <input  id="name" type="text"
                        formControlName="artifactId"                      
                        [ngClass]="{invalid: dependSubmitForm.get('artifactId').invalid  && dependSubmitForm.get('artifactId').touched}">       
                <span class="error"
                    style="position: absolute; z-index: 4;" 
                    *ngIf="dependSubmitForm.get('artifactId').hasError('required') && dependSubmitForm.get('artifactId').touched">
                    Required
                </span>       
            </div>
            <div class="input-field col s6 m4">
                <label for="name">Group Id</label> 
                <input  id="name" type="text"
                        formControlName="groupId"                      
                        [ngClass]="{invalid: dependSubmitForm.get('groupId').invalid  && dependSubmitForm.get('groupId').touched}">       
                <span class="error"
                    style="position: absolute; z-index: 4;" 
                    *ngIf="dependSubmitForm.get('groupId').hasError('required') && dependSubmitForm.get('groupId').touched">
                    Required
                </span>       
            </div>
            <div class="input-field col s6 m4">
                <label for="name">Version</label> 
                <input  id="name" type="text"
                        formControlName="version"                     
                        [ngClass]="{invalid: dependSubmitForm.get('version').invalid  && dependSubmitForm.get('version').touched}">       
                <span class="error"
                    style="position: absolute; z-index: 4;" 
                    *ngIf="dependSubmitForm.get('version').hasError('version') && dependSubmitForm.get('version').touched">
                    Required
                </span>       
            </div>
        </div>

        <div class="row">
            <div class="input-field col s12 m12">
                <label for="description">Description</label> 
                <textarea id="description" class="materialize-textarea"              
                        formControlName="description"                       
                        [ngClass]="{invalid: dependSubmitForm.get('description').invalid  && dependSubmitForm.get('description').touched}"></textarea>       
                <span class="error"
                    style="position: absolute; z-index: 4;" 
                    *ngIf="dependSubmitForm.get('description').hasError('required') && dependSubmitForm.get('description').touched">
                    Required
                </span>       
            </div>
        </div>

        <div class="row">
            <div class="input-field col s6 m6">
                <label for="scope">Scope</label> 
                <input  id="scope" type="text"
                        formControlName="scope" 
                        [ngClass]="{invalid: dependSubmitForm.get('scope').invalid  && dependSubmitForm.get('scope').touched}">       
                <span class="error"
                    style="position: absolute; z-index: 4;" 
                    *ngIf="dependSubmitForm.get('scope').hasError('required') && dependSubmitForm.get('scope').touched">
                    Required
                </span>       
            </div>
            <div class="input-field col s6 m6">
                <label for="packaging">Packaging</label> 
                <input  id="packaging" type="text" formControlName="packaging">     
            </div>
        </div>

        <div class="row">
            <div class="input-field col s6 m6">
                <label for="gitUrl">Gitlab URL</label> 
                <input  id="gitUrl" type="text" formControlName="gitUrl">     
            </div>
            <div class="input-field col s6 m6">
                <label for="documentation">Documentation URL</label> 
                <input  id="documentation" type="text" formControlName="documentation">   
            </div>
        </div>
        
        <div class="row">
            <div class="input-field col s6 m6">
                <i class="material-icons prefix">perm_identity</i>
                <label for="user">Your Michelin ID</label>
                <input  id="user" type="text"
                        formControlName="user"
                        [ngClass]="{invalid: dependSubmitForm.get('user').invalid  && dependSubmitForm.get('user').touched}">
                <div class="error" *ngIf="dependSubmitForm.get('user').hasError('required') && dependSubmitForm.get('user').touched">
                    Required
                </div>  
            </div>
        </div>

    </div>

    <div class="row">
        <div class="right-align">
            <button class="btn waves-effect waves-light red" 
                    type="submit" name="action"
                    [attr.disabled]="dependSubmitForm.invalid ? true : null">Propose !</button>
        </div>
    </div>
</form>